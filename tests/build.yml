- name: Build the test container
  hosts: localhost
  connection: local
  gather_facts: no
  tasks:

    - name: Remove output file
      file:
        path: "{{ item }}" 
        state: absent
      with_items:
       - build.out

    - name: Build conductor container
      shell: ansible-container build

    - name: Install this role with latest commit   
      shell: "ansible-container install git+https://github.com/{{role_github_repo}},{{role_github_commit}}"
      
    - name: Build the project
      shell: ansible-container --debug build

